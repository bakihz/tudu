<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8" />
    <title>Tu-Du Görevler</title>
    <meta
      http-equiv="Content-Security-Policy"
      content="default-src 'self'; script-src 'self'; img-src 'self' data:; style-src 'self' 'unsafe-inline' https://cdn.jsdelivr.net; font-src 'self' https://cdn.jsdelivr.net;"
    />
    <link rel="stylesheet" href="../src/styles/global.css" />
    <link rel="stylesheet" href="../src/styles/Tasks/Variables.css" />
    <link rel="stylesheet" href="../src/styles/Tasks/Buttons.css" />
    <link rel="stylesheet" href="../src/styles/Tasks/Sidebar.css" />
    <link rel="stylesheet" href="../src/styles/Tasks/Modals.css" />
    <link rel="stylesheet" href="../src/styles/Tasks/Forms.css" />
    <link rel="stylesheet" href="../src/styles/Tasks/Tasklist.css" />
    <link rel="stylesheet" href="../src/styles/Tasks/TasksPage.css" />
    <style>
      #close-add-task-sidebar.btn-close {
        color: #fff !important;
        /* ... */
      }
    </style>
  </head>
  <body>
    <!-- Side Navigation -->
    <nav id="side-nav">
      <h4 id="current-user-name"></h4>
      <a href="../public/finance-overview.html" class="nav-link admin-only"
        >Finans</a
      >
      <a href="admin-settings.html" class="nav-link admin-only">Kullanıcılar</a>
      <a href="tasks.html" class="nav-link admin-only">Görevler</a>
      <a href="stock-report.html" class="nav-link admin-only">Ayarlar</a>
      <a href="#" id="logout-link" class="nav-link text-danger">Çıkış yap</a>
    </nav>

    <div class="main-content">
      <div class="card">
        <h1 class="text-center mb-4">Tu-Du</h1>
        <div id="todo-app" class="mt-4">
          <div class="input-group mb-3 d-flex gap-2">
            <input
              type="text"
              id="new-todo-admin"
              class="form-control"
              placeholder="Yeni görev ekle"
            />
            <button id="add-todo-admin" class="btn btn-primary" type="button">
              Görev ekle
            </button>
          </div>
          <div
            class="mb-3 d-flex align-items-center gap-2"
            id="user-filter-container"
          >
            <label for="user-filter" class="form-label"
              >Kullanıcıya göre filtrele:</label
            >
            <select
              id="user-filter"
              class="form-select"
              style="max-width: 300px"
            >
              <option value="all">Tümü</option>
            </select>
            <button
              id="toggle-completed-btn"
              class="btn btn-outline-secondary ms-2"
              type="button"
            >
              Tamamlanmış Görevler
            </button>
          </div>
          <ul id="todo-list-admin" class="list-group"></ul>
        </div>
      </div>
    </div>

    <!-- Add Task Sidebar -->
    <div id="add-task-sidebar" class="add-task-sidebar">
      <div
        class="sidebar-header d-flex justify-content-between align-items-center"
      >
        <h2>Yeni Görev Ekle</h2>
        <!-- Replace the SVG in your close button with this version for a light (white) icon: -->
        <button
          id="close-add-task-sidebar"
          class="btn-close"
          aria-label="Kapat"
        >
          <svg
            width="22"
            height="22"
            viewBox="0 0 22 22"
            fill="none"
            style="display: block; margin: auto"
            xmlns="http://www.w3.org/2000/svg"
          >
            <line
              x1="6"
              y1="6"
              x2="16"
              y2="16"
              stroke="#fff"
              stroke-width="2"
              stroke-linecap="round"
            />
            <line
              x1="16"
              y1="6"
              x2="6"
              y2="16"
              stroke="#fff"
              stroke-width="2"
              stroke-linecap="round"
            />
          </svg>
        </button>
      </div>
      <form id="task-form" class="p-3">
        <div class="mb-3">
          <label for="task-name" class="form-label">Görev ne olsun?</label>
          <input
            type="text"
            id="task-name"
            class="form-control"
            placeholder="Görev ekleyin"
            required
          />
        </div>
        <div class="mb-3">
          <label for="task-type" class="form-label">Aciliyet var mı?</label>
          <select id="task-type" class="form-select">
            <option value="1">Acil</option>
            <option value="2" selected>Normal</option>
          </select>
        </div>
        <div class="mb-3">
          <label for="task-deadline" class="form-label">Son tarih nedir</label>
          <input
            type="datetime-local"
            id="task-deadline"
            class="form-control"
          />
        </div>
        <div class="mb-3">
          <label for="task-recurring" class="form-label"
            >Tekrar etsin mi?</label
          >
          <select id="task-recurring" class="form-select">
            <option value="1">Evet</option>
            <option value="0" selected>Hayır</option>
          </select>
        </div>
        <div class="mb-3">
          <label for="task-interval" class="form-label"
            >Nasıl tekrar etsin?</label
          >
          <select id="task-interval" class="form-select">
            <option value="" disabled selected>Seçiniz</option>
            <option value="daily">Günlük</option>
            <option value="working-days">
              Çalışma günleri (Pazartesi-Cumartesi)
            </option>
            <option value="weekly">Haftalık</option>
            <option value="monthly">Aylık</option>
            <option value="yearly">Yıllık</option>
            <option value="custom">Özel...</option>
          </select>
        </div>
        <div class="mb-3">
          <label for="task-details" class="form-label"
            >Not eklemek ister misin?</label
          >
          <textarea
            id="task-details"
            class="form-control"
            rows="3"
            placeholder="Not ekleyin"
          ></textarea>
        </div>
        <div class="mb-3">
          <label for="task-assignee" class="form-label"
            >Görev kime atanacak?</label
          >
          <select id="task-assignee" class="form-select"></select>
        </div>
        <button type="submit" class="btn btn-primary">Kaydet</button>
      </form>
    </div>

    <!-- Edit Task Sidebar -->
    <div id="edit-task-sidebar" class="edit-task-sidebar">
      <div
        class="sidebar-header d-flex justify-content-between align-items-center"
      >
        <h2>Görev Detayları</h2>
        <button
          id="close-edit-task-sidebar"
          class="btn-close"
          aria-label="Kapat"
        >
          <svg width="22" height="22" viewBox="0 0 22 22" fill="none">
            <line
              x1="6"
              y1="6"
              x2="16"
              y2="16"
              stroke="#fff"
              stroke-width="2"
              stroke-linecap="round"
            />
            <line
              x1="16"
              y1="6"
              x2="6"
              y2="16"
              stroke="#fff"
              stroke-width="2"
              stroke-linecap="round"
            />
          </svg>
        </button>
      </div>
      <div id="edit-task-fields" class="p-3"></div>
    </div>

    <!-- Custom Interval Modal -->
    <div id="custom-interval-modal" class="modal">
      <div>
        <label
          >Tekrar et her
          <input
            type="number"
            id="custom-interval-number"
            min="1"
            value="1"
            style="width: 60px"
          />
        </label>
        <select
          id="custom-interval-unit"
          class="form-select"
          style="display: inline-block; width: auto"
        >
          <option value="day">gün</option>
          <option value="week">hafta</option>
          <option value="month">ay</option>
          <option value="year">yıl</option>
        </select>
        <button id="custom-interval-ok" class="btn btn-primary btn-sm ms-2">
          Tamam
        </button>
        <button
          id="custom-interval-cancel"
          class="btn btn-secondary btn-sm ms-2"
        >
          İptal
        </button>
      </div>
    </div>

    <!-- Version Info Footer -->
    <div class="version-footer">
      <span id="version-info">Tudu v1.0.13</span>
      <span class="version-date">© 2025 Bakihz</span>
    </div>

    <script type="module" src="../src/components/Tasks/index.js"></script>

    <style>
      .version-footer {
        position: fixed;
        bottom: 10px;
        right: 10px;
        font-size: 12px;
        color: #666;
        background: rgba(255, 255, 255, 0.9);
        padding: 5px 10px;
        border-radius: 4px;
        border: 1px solid #ddd;
        z-index: 1000;
      }

      .version-footer span {
        display: block;
        text-align: right;
      }

      .version-date {
        font-size: 10px;
        color: #999;
        margin-top: 2px;
      }
    </style>
  </body>
</html>
